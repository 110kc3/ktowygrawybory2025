<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Kto wygra wybory 2025?</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Arial', sans-serif;
      background: #121212;
      color: #ffffff;
      text-align: center;
    }

    h1 {
      margin-top: 1.5rem;
      font-size: 1.8rem;
    }

    canvas {
      max-width: 90vw;
      max-height: 90vw;
      margin: 2rem auto;
      display: block;
    }

    button {
      background: #00c853;
      color: #fff;
      padding: 1rem 2rem;
      font-size: 1.2rem;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      transition: background 0.3s;
    }

    button:hover {
      background: #00e676;
    }

    #winner {
      margin-top: 2rem;
      font-size: 1.4rem;
      color: #ffeb3b;
    }
  </style>

  <!-- Winwheel & GSAP -->
  <script src="https://cdn.jsdelivr.net/gh/zarocknz/javascript-winwheel/Winwheel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>

  <link rel="icon" href="data:,">
</head>
<body>

  <canvas id="wheelCanvas" width="500" height="500"></canvas>

  <button onclick="spin()">Kto wygra wybory prezydenckie 2025?</button>

  <h2 id="winner"></h2>

  <script>
    const candidates = [
      "BARTOSZEWICZ Artur",
      "BIEJAT Magdalena Agnieszka",
      "BRAUN Grzegorz Michał",
      "HOŁOWNIA Szymon Franciszek",
      "JAKUBIAK Marek",
      "MACIAK Maciej",
      "MENTZEN Sławomir Jerzy",
      "NAWROCKI Karol Tadeusz",
      "SENYSZYN Joanna",
      "STANOWSKI Krzysztof Jakub",
      "TRZASKOWSKI Rafał Kazimierz",
      "WOCH Marek Marian",
      "ZANDBERG Adrian Tadeusz"
    ];

    function generateUniqueColors(n) {
      const colors = [];
      const step = 360 / n;
      for (let i = 0; i < n; i++) {
        const hue = Math.round(i * step);
        colors.push(`hsl(${hue}, 90%, 60%)`);
      }
      return colors;
    }

    const colors = generateUniqueColors(candidates.length);

    const wheel = new Winwheel({
      canvasId: 'wheelCanvas',
      numSegments: candidates.length,
      outerRadius: 220,
      innerRadius: 20, // padding to prevent text from touching center
      textMargin: 10,  // extra margin so text doesn’t touch the edge
      textFontSize: 13,
      segments: candidates.map((name, i) => ({
        fillStyle: colors[i],
        text: name
      })),
      animation: {
        type: 'spinToStop',
        duration: 6,
        spins: 10,
        callbackFinished: displayWinner
      }
    });

    function spin() {
      document.getElementById("winner").textContent = "";
      wheel.stopAnimation(false);
      wheel.rotationAngle = 0;
      wheel.draw();
      wheel.startAnimation();
    }

    function displayWinner(indicatedSegment) {
      document.getElementById("winner").textContent = "Wylosowano: " + indicatedSegment.text;
    }
  </script>
</body>
</html>
